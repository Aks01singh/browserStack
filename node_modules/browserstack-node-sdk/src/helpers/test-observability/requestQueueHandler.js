function a83_0x4c2e(_0x121a2c,_0x4933e4){const _0x348055=a83_0x3480();return a83_0x4c2e=function(_0x4c2e9e,_0xc1bced){_0x4c2e9e=_0x4c2e9e-0x9d;let _0x2572db=_0x348055[_0x4c2e9e];return _0x2572db;},a83_0x4c2e(_0x121a2c,_0x4933e4);}const a83_0x54dd08=a83_0x4c2e;(function(_0x24a83a,_0x54b8f0){const _0x4e7ce7=a83_0x4c2e,_0x5993a6=_0x24a83a();while(!![]){try{const _0x1919cf=parseInt(_0x4e7ce7(0x108))/0x1*(-parseInt(_0x4e7ce7(0x101))/0x2)+-parseInt(_0x4e7ce7(0xdb))/0x3+parseInt(_0x4e7ce7(0x104))/0x4*(parseInt(_0x4e7ce7(0xfb))/0x5)+-parseInt(_0x4e7ce7(0xdf))/0x6+parseInt(_0x4e7ce7(0xc5))/0x7+-parseInt(_0x4e7ce7(0x100))/0x8*(-parseInt(_0x4e7ce7(0xa6))/0x9)+-parseInt(_0x4e7ce7(0xf3))/0xa*(-parseInt(_0x4e7ce7(0xf6))/0xb);if(_0x1919cf===_0x54b8f0)break;else _0x5993a6['push'](_0x5993a6['shift']());}catch(_0x5880c7){_0x5993a6['push'](_0x5993a6['shift']());}}}(a83_0x3480,0x3362b));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require(a83_0x54dd08(0xba)),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a83_0x54dd08(0xc6)),{nestedKeyValue}=require('../helper'),util=require(a83_0x54dd08(0xe6));class RequestQueueHandler{static ['instance'];[a83_0x54dd08(0xb2)]=0x0;constructor(){const _0x55b7c4=a83_0x54dd08,_0x397a84={};_0x397a84[_0x55b7c4(0x102)]=_0x55b7c4(0xef),_0x397a84['WEsQr']=_0x55b7c4(0xd7),_0x397a84[_0x55b7c4(0xd5)]=_0x55b7c4(0xbf),_0x397a84[_0x55b7c4(0xd9)]=_0x55b7c4(0xb3),_0x397a84['pEpfj']=_0x55b7c4(0xbc),_0x397a84[_0x55b7c4(0xb7)]='HookRunFinished',_0x397a84[_0x55b7c4(0xfa)]=_0x55b7c4(0xd2),_0x397a84[_0x55b7c4(0xd4)]=_0x55b7c4(0xdd),_0x397a84[_0x55b7c4(0xbb)]=_0x55b7c4(0xb6),_0x397a84[_0x55b7c4(0x107)]=_0x55b7c4(0xd6);const _0xa912d8=_0x397a84,_0x2873e4=_0xa912d8['HIWJZ'][_0x55b7c4(0x105)]('|');let _0x3f1d7a=0x0;while(!![]){switch(_0x2873e4[_0x3f1d7a++]){case'0':this[_0x55b7c4(0xa1)]=[_0xa912d8[_0x55b7c4(0xdc)],_0xa912d8[_0x55b7c4(0xd5)],_0xa912d8[_0x55b7c4(0xd9)],_0xa912d8[_0x55b7c4(0xe1)],_0xa912d8[_0x55b7c4(0xb7)],_0xa912d8[_0x55b7c4(0xfa)],_0xa912d8[_0x55b7c4(0xd4)]];continue;case'1':this[_0x55b7c4(0xad)]=_0xa912d8[_0x55b7c4(0xbb)];continue;case'2':this[_0x55b7c4(0xc9)]=null;continue;case'3':this[_0x55b7c4(0xc8)]=![];continue;case'4':this[_0x55b7c4(0xf8)]=_0xa912d8['tUXay'];continue;case'5':this[_0x55b7c4(0xaf)]=[];continue;}break;}}static[a83_0x54dd08(0xeb)](){const _0x31df74=a83_0x54dd08;return!RequestQueueHandler[_0x31df74(0xfe)]&&(RequestQueueHandler[_0x31df74(0xfe)]=new RequestQueueHandler()),RequestQueueHandler[_0x31df74(0xfe)];}['start']=()=>{const _0x45ceb=a83_0x54dd08;!this[_0x45ceb(0xc8)]&&(this['started']=!![],this[_0x45ceb(0xc7)]());};[a83_0x54dd08(0x106)]=_0x509277=>{const _0x37cb9e=a83_0x54dd08,_0x58cfc5={'kxYNC':function(_0x4bbb58,_0x485bde){return _0x4bbb58===_0x485bde;},'ZMGAU':'TEST_SCREENSHOT','hVxOa':function(_0x66a4dc,_0x3edc3a){return _0x66a4dc(_0x3edc3a);},'lDlIh':_0x37cb9e(0xd0)};if(this[_0x37cb9e(0xa1)]['includes'](_0x509277['event_type'])){if(_0x509277[_0x37cb9e(0x103)]&&_0x509277[_0x37cb9e(0x103)][0x0]&&_0x58cfc5[_0x37cb9e(0xf7)](_0x509277[_0x37cb9e(0x103)][0x0][_0x37cb9e(0xb0)],_0x58cfc5[_0x37cb9e(0xea)])){const _0x10c808={};return _0x10c808[_0x37cb9e(0xcd)]=!![],_0x10c808[_0x37cb9e(0xc0)]=[_0x509277],_0x10c808[_0x37cb9e(0x9e)]=this[_0x37cb9e(0xf8)],_0x10c808;}this[_0x37cb9e(0xaf)][_0x37cb9e(0xb4)](_0x509277);let _0x395be6=null;const _0x2e0db9=this[_0x37cb9e(0xcd)]();_0x2e0db9&&(_0x58cfc5['hVxOa'](trace,_0x58cfc5[_0x37cb9e(0xa3)]),_0x395be6=this[_0x37cb9e(0xaf)][_0x37cb9e(0xf0)](0x0,BATCH_SIZE),this[_0x37cb9e(0xaf)][_0x37cb9e(0xf4)](0x0,BATCH_SIZE),this['resetEventBatchPolling']());const _0x4467be={};return _0x4467be['shouldProceed']=_0x2e0db9,_0x4467be[_0x37cb9e(0xc0)]=_0x395be6,_0x4467be[_0x37cb9e(0x9e)]=this['eventUrl'],_0x4467be;}const _0x290d10={};return _0x290d10[_0x37cb9e(0xcd)]=!![],_0x290d10;};['shutdown']=async()=>{const _0x22249e=a83_0x54dd08,_0x1cb2b8={'lttUx':'REMOVING','qwLZH':function(_0x41f724,_0x5a4a4b){return _0x41f724>_0x5a4a4b;},'Fzsai':_0x22249e(0xab),'HvLOC':function(_0x38172b,_0x2e59b3){return _0x38172b(_0x2e59b3);}};await this[_0x22249e(0xce)](),this[_0x22249e(0xd1)](_0x1cb2b8[_0x22249e(0xd8)]);while(_0x1cb2b8['qwLZH'](this[_0x22249e(0xaf)][_0x22249e(0xa9)],0x0)){const _0x31ea3f=this[_0x22249e(0xaf)][_0x22249e(0xf0)](0x0,BATCH_SIZE);this['queue']['splice'](0x0,BATCH_SIZE),await this[_0x22249e(0xed)](this[_0x22249e(0xad)],_0x1cb2b8[_0x22249e(0xbd)],_0x31ea3f);}_0x1cb2b8[_0x22249e(0x109)](this[_0x22249e(0xb2)],0x0)&&_0x1cb2b8[_0x22249e(0xda)](debug,_0x22249e(0xa7)+this[_0x22249e(0xb2)]);};[a83_0x54dd08(0xed)]=async(_0x547ba1,_0x5a397a,_0x42652e)=>{const _0x4df11f=a83_0x54dd08,_0x26d6f4={'ytnjF':function(_0x58a077,_0xd30730){return _0x58a077(_0xd30730);},'bsbHT':_0x4df11f(0xcf),'tVhTJ':function(_0x4c96b9){return _0x4c96b9();},'dRThu':function(_0x51db2b,_0x37d280,_0x4f83e1,_0x29870e,_0xec74a0){return _0x51db2b(_0x37d280,_0x4f83e1,_0x29870e,_0xec74a0);},'dQhEI':'POST','oWMHA':function(_0x47b961,_0x5ac4ad){return _0x47b961-_0x5ac4ad;},'HBnNe':function(_0x20084b,_0x28f8c0){return _0x20084b-_0x28f8c0;}};let _0x2135e0='';try{_0x2135e0=_0x42652e[_0x4df11f(0xc4)](_0x3ac6bd=>'\x27'+_0x3ac6bd['event_type']+'\x27:'+(nestedKeyValue(_0x3ac6bd,[_0x4df11f(0x10a),_0x4df11f(0xc2)])||nestedKeyValue(_0x3ac6bd,[_0x4df11f(0xd3),_0x4df11f(0xc2)])))[_0x4df11f(0xcb)](','),_0x26d6f4[_0x4df11f(0xe5)](debug,'Processing\x20batch\x20events\x20for\x20'+_0x5a397a+_0x4df11f(0xa4)+Buffer[_0x4df11f(0xe9)](util[_0x4df11f(0xb8)]('%j',_0x42652e),_0x26d6f4['bsbHT'])+'\x20bytes.\x20Events\x20are\x20'+_0x2135e0);}catch(_0xe709cd){_0x26d6f4[_0x4df11f(0xe5)](debug,_0x4df11f(0xf2)+util[_0x4df11f(0xb8)](_0xe709cd)+'}');}const _0x41d6b2={'headers':_0x26d6f4[_0x4df11f(0xf9)](getDefaultHeaders)};try{const _0x5c7b5f=await _0x26d6f4[_0x4df11f(0xc3)](nodeRequest,_0x26d6f4[_0x4df11f(0xe8)],_0x547ba1,_0x42652e,_0x41d6b2);if(_0x5c7b5f['data'][_0x4df11f(0xfc)]){const _0x33e53c={};_0x33e53c[_0x4df11f(0xf1)]=_0x5c7b5f['data'][_0x4df11f(0xfc)];throw _0x33e53c;}else _0x26d6f4[_0x4df11f(0xe5)](debug,_0x5a397a+_0x4df11f(0xac)+_0x2135e0+_0x4df11f(0x9d)+util[_0x4df11f(0xb8)]('%j',_0x5c7b5f[_0x4df11f(0xde)])),this['pendingUploads']=Math[_0x4df11f(0xaa)](0x0,_0x26d6f4['oWMHA'](this[_0x4df11f(0xb2)],_0x42652e['length']));}catch(_0x46b2b7){_0x46b2b7['response']?_0x26d6f4[_0x4df11f(0xe5)](debug,_0x4df11f(0xf5)+_0x5a397a+_0x4df11f(0xfd)+_0x46b2b7[_0x4df11f(0xb9)][_0x4df11f(0xb5)]+'\x20'+_0x46b2b7[_0x4df11f(0xb9)][_0x4df11f(0xa2)]+'\x20'+JSON[_0x4df11f(0xca)](_0x46b2b7['response'][_0x4df11f(0xde)])):_0x26d6f4['ytnjF'](debug,_0x4df11f(0xf5)+_0x5a397a+_0x4df11f(0xfd)+(_0x46b2b7[_0x4df11f(0xf1)]||_0x46b2b7)),this[_0x4df11f(0xb2)]=Math[_0x4df11f(0xaa)](0x0,_0x26d6f4[_0x4df11f(0xe7)](this[_0x4df11f(0xb2)],_0x42652e[_0x4df11f(0xa9)]));}};[a83_0x54dd08(0xc7)]=()=>{const _0x15ca2e=a83_0x54dd08,_0x551e44={'LdiSC':function(_0x50ec9b,_0x4520b6){return _0x50ec9b>_0x4520b6;},'tCaVY':function(_0x15a5ea,_0x2e64a8){return _0x15a5ea(_0x2e64a8);},'AsBNq':_0x15ca2e(0xb1),'umXYA':function(_0x527931,_0x3ecdcb){return _0x527931(_0x3ecdcb);},'hUCkU':function(_0x1c8eb6,_0x570ee4,_0x5a7dc3){return _0x1c8eb6(_0x570ee4,_0x5a7dc3);}};this['pollEventBatchInterval']=_0x551e44[_0x15ca2e(0xa5)](setInterval,async()=>{const _0x377797=_0x15ca2e;if(_0x551e44[_0x377797(0xec)](this[_0x377797(0xaf)]['length'],0x0)){_0x551e44[_0x377797(0xe0)](trace,_0x377797(0xff)+this[_0x377797(0xaf)][_0x377797(0xa9)]);const _0x101301=this[_0x377797(0xaf)][_0x377797(0xf0)](0x0,BATCH_SIZE);this[_0x377797(0xaf)][_0x377797(0xf4)](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x377797(0xad)],_0x551e44[_0x377797(0xc1)],_0x101301),_0x551e44['umXYA'](trace,_0x377797(0xe2)+this[_0x377797(0xaf)][_0x377797(0xa9)]);}},BATCH_INTERVAL);};['resetEventBatchPolling']=()=>{const _0x143756=a83_0x54dd08,_0x1539d6={};_0x1539d6[_0x143756(0xa0)]=_0x143756(0xe3);const _0x4bc76d=_0x1539d6;this[_0x143756(0xd1)](_0x4bc76d[_0x143756(0xa0)]),this[_0x143756(0xc7)]();};[a83_0x54dd08(0xd1)]=_0x43a202=>{const _0x5331c4=a83_0x54dd08,_0x39d229={'NeCDG':function(_0x373069,_0x565792){return _0x373069(_0x565792);},'eibos':function(_0x3e51b4,_0x27b6c4){return _0x3e51b4===_0x27b6c4;},'FTnRw':_0x5331c4(0xa8)};this[_0x5331c4(0xc9)]&&(_0x39d229[_0x5331c4(0xcc)](clearInterval,this[_0x5331c4(0xc9)]),this['pollEventBatchInterval']=null,_0x39d229[_0x5331c4(0xee)](_0x43a202,_0x39d229['FTnRw'])&&(this[_0x5331c4(0xc8)]=![]));};[a83_0x54dd08(0xcd)]=()=>{const _0x52962a=a83_0x54dd08,_0x41da93={};_0x41da93[_0x52962a(0x9f)]=function(_0x68902d,_0x2d1a63){return _0x68902d>=_0x2d1a63;};const _0x20ff37=_0x41da93;return _0x20ff37[_0x52962a(0x9f)](this[_0x52962a(0xaf)][_0x52962a(0xa9)],BATCH_SIZE);};async['uploadPending'](_0xa29e46=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x425844=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x44611f=a83_0x54dd08,_0x713379={'TomCO':function(_0xc20fee,_0x16fa73){return _0xc20fee<=_0x16fa73;},'aAKlr':function(_0x49f442,_0x7ccf0b){return _0x49f442(_0x7ccf0b);},'xfLlR':function(_0x395b7b,_0x47afce){return _0x395b7b-_0x47afce;}};if(_0x713379['TomCO'](this[_0x44611f(0xb2)],0x0)||_0x713379['TomCO'](_0xa29e46,0x0))return;return await _0x713379[_0x44611f(0xae)](sleep,_0x425844),this[_0x44611f(0xce)](_0x713379[_0x44611f(0xbe)](_0xa29e46,_0x425844));}}module[a83_0x54dd08(0xe4)]=RequestQueueHandler;function a83_0x3480(){const _0x11e30e=['CBTSessionCreated','proceedWithData','AsBNq','uuid','dRThu','map','2424177CJQXXn','./utils','startEventBatchPolling','started','pollEventBatchInterval','stringify','join','NeCDG','shouldProceed','uploadPending','utf8','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','removeEventBatchPolling','TestRunStarted','hook_run','jGkQN','yQaJp','api/v1/screenshots','LogCreated','lttUx','Qnrto','HvLOC','25644KvbYRo','WEsQr','HookRunStarted','data','1027140WOmuKr','tCaVY','pEpfj','Remaining\x20Queue\x20Length\x20-\x20','RESETTING','exports','ytnjF','util','HBnNe','dQhEI','byteLength','ZMGAU','getInstance','LdiSC','batchAndPostEvents','eibos','5|3|1|4|0|2','slice','message','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','963830uICvhV','splice','EXCEPTION\x20IN\x20','11jqCIfX','kxYNC','screenshotEventUrl','tVhTJ','mfGTD','5555ORCfpt','error','\x20REQUEST\x20TO\x20TEST\x20OBSERVABILITY\x20:\x20','instance','Processing\x20events.\x20Queue\x20Length\x20-\x20','1392984uHtgXm','160dWIlED','HIWJZ','logs','624WnuNxZ','split','add','tUXay','4999dgOxGy','qwLZH','test_run','\x20--\x20','proceedWithUrl','pfItZ','yWlLS','BATCH_EVENT_TYPES','statusText','lDlIh','.\x20Request\x20Size\x20-\x20','hUCkU','9iIMuaH','Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20','REMOVING','length','max','Shutdown-Queue','\x20event\x20successful\x20for\x20events\x20','eventUrl','aAKlr','queue','kind','Interval-Queue','pendingUploads','TestRunFinished','push','status','api/v1/batch','cHecv','format','response','./constants','OSrdN','TestRunSkipped','Fzsai','xfLlR'];a83_0x3480=function(){return _0x11e30e;};return a83_0x3480();}