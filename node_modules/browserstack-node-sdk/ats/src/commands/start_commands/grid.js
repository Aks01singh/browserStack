const a17_0x166677=a17_0x3c88;(function(_0x1fa3f8,_0x1904e9){const _0x41c805=a17_0x3c88,_0x6d1f5b=_0x1fa3f8();while(!![]){try{const _0x33b947=parseInt(_0x41c805(0xff))/0x1+parseInt(_0x41c805(0xd7))/0x2+-parseInt(_0x41c805(0x114))/0x3*(parseInt(_0x41c805(0x10a))/0x4)+-parseInt(_0x41c805(0xde))/0x5*(parseInt(_0x41c805(0x118))/0x6)+-parseInt(_0x41c805(0xd4))/0x7+parseInt(_0x41c805(0x113))/0x8+-parseInt(_0x41c805(0xe5))/0x9;if(_0x33b947===_0x1904e9)break;else _0x6d1f5b['push'](_0x6d1f5b['shift']());}catch(_0x513405){_0x6d1f5b['push'](_0x6d1f5b['shift']());}}}(a17_0x51c5,0xa3e93));function a17_0x51c5(){const _0x286fb0=['message','server-error','../../utils/utilityMethods','<PasswordPlaceholder>','bstackAccesskey','unauthorised','VESoj','Starting\x20grid\x20','clusterRegion','Unable\x20to\x20start\x20the\x20Grid!\x20Error:\x20','clusterName','<UsernamePlaceholder>','stack','readFileSync','builder','Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','1240612ChGzsX','region','ekcDa','aFRJa','pUroa','jDUgT','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','desc','Pass\x20the\x20ID\x20of\x20the\x20existing\x20Automation\x20grid\x20you\x20want\x20to\x20start.','grid-id','Start\x20an\x20existing\x20Automation\x20grid.','472492LYedHQ','error','Browserstack','description','parse','bzXjQ','dvrTX','exit','diuBz','9507008OYCDQZ','9gwhdjb','kWhXM','agZMI','user','4968JTIVtd','../../utils/webSocketUtils','yFGDy','ePqdu','addListeners','replace','Skip\x20insecure\x20cert\x20verification.','../../cloudproviders/utils','vreRT','username','ERROR','cloudProvider','usage','nnJdv','connectionTimeout','existsSync','../../config/logger','EFuix','WebSocket','gridId','Grid\x20started','grid','Adding\x20Websocket\x20listeners','MhXaR','iTkQT','INFO','vDRDl','6116901JggQiJ','skip-tls-cert-verify','name','1181906GLSCgs','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','invalid-grid-id','zRpVt','../../utils/instrumentationUtils','DgZEl','argv','3770EyHOQM','type','stringify','password','info','bouuu','GdDBx','4464342CSbPnZ','pENPN','string','statusCode','../../utils/gridComponents','command','help','handler','wXMFo','bstackUsername'];a17_0x51c5=function(){return _0x286fb0;};return a17_0x51c5();}const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require('reconnecting-websocket'),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require('../../config/constants'),{logger}=require(a17_0x166677(0xc9)),{getCredentialsPath,getGridDetails}=require(a17_0x166677(0xf1)),{scaleUpHubDeployment}=require(a17_0x166677(0xe9)),{sendInstrumentationEvent}=require(a17_0x166677(0xdb)),webSocketUtils=require(a17_0x166677(0x119)),{createK8sClient}=require('../../utils/createk8sClient'),{getCloudProviderObject}=require(a17_0x166677(0xc0));function a17_0x3c88(_0x3551b9,_0x5d88d6){const _0x51c5fa=a17_0x51c5();return a17_0x3c88=function(_0x3c88d0,_0x52a2db){_0x3c88d0=_0x3c88d0-0xbf;let _0x5ddead=_0x51c5fa[_0x3c88d0];return _0x5ddead;},a17_0x3c88(_0x3551b9,_0x5d88d6);}exports[a17_0x166677(0xea)]=a17_0x166677(0xce),exports[a17_0x166677(0x106)]=a17_0x166677(0x109),exports[a17_0x166677(0xfd)]=function(_0x382832){const _0x266ef9=a17_0x166677,_0x2aa114={};_0x2aa114[_0x266ef9(0x116)]=_0x266ef9(0x107),_0x2aa114['NsutL']=_0x266ef9(0xe7),_0x2aa114[_0x266ef9(0x103)]=_0x266ef9(0xbf),_0x2aa114['MhXaR']='boolean',_0x2aa114['wXMFo']=_0x266ef9(0xeb);const _0x3e237e=_0x2aa114,_0x42039c={};_0x42039c['description']=_0x3e237e[_0x266ef9(0x116)],_0x42039c['type']=_0x3e237e['NsutL'];const _0x573f94={};_0x573f94[_0x266ef9(0x10d)]=_0x3e237e['pUroa'],_0x573f94[_0x266ef9(0xdf)]=_0x3e237e[_0x266ef9(0xd0)],_0x573f94['default']=![];const _0x1dd24b={};return _0x1dd24b[_0x266ef9(0x108)]=_0x42039c,_0x1dd24b[_0x266ef9(0xd5)]=_0x573f94,_0x382832[_0x266ef9(0xc5)](HELP_HEADER_MESSAGE['start'])['epilogue'](HELP_FOOTER_MESSAGE)['options'](_0x1dd24b)[_0x266ef9(0xeb)](_0x3e237e[_0x266ef9(0xed)])[_0x266ef9(0xdd)];},exports[a17_0x166677(0xec)]=async function(_0x4c6d95){const _0x40693a=a17_0x166677,_0x2382a4={'iTkQT':'Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20start','EFuix':function(_0xe5e9e7){return _0xe5e9e7();},'yFGDy':_0x40693a(0xfe),'ePqdu':function(_0x573612,_0x19539a,_0x45c221,_0x21976b,_0x5e7cf9,_0x4c4076,_0x505cc4){return _0x573612(_0x19539a,_0x45c221,_0x21976b,_0x5e7cf9,_0x4c4076,_0x505cc4);},'VESoj':'start-grid-called','xYJMw':'init-not-called','GdDBx':function(_0x5c67b3,_0x2e24be,_0x42a796,_0x53a776,_0x16c957,_0x4c90b8,_0xea17a6){return _0x5c67b3(_0x2e24be,_0x42a796,_0x53a776,_0x16c957,_0x4c90b8,_0xea17a6);},'jDUgT':_0x40693a(0xfa),'ekcDa':_0x40693a(0xf2),'kWhXM':_0x40693a(0xcf),'DgZEl':function(_0x2f075c,_0x2f7298,_0x38338e,_0x119ca5){return _0x2f075c(_0x2f7298,_0x38338e,_0x119ca5);},'bouuu':function(_0x415c7b,_0x364385,_0x35b191){return _0x415c7b(_0x364385,_0x35b191);},'nnJdv':function(_0x4bbecd,_0x525290,_0x2db526){return _0x4bbecd(_0x525290,_0x2db526);},'vreRT':_0x40693a(0xcd),'aFRJa':function(_0x43c207,_0x2c274c){return _0x43c207===_0x2c274c;},'zRpVt':_0x40693a(0x105),'vDRDl':function(_0x109737,_0xa2b187,_0x34a967,_0x541ab4,_0x865ecd,_0x4b3814,_0x12b63c){return _0x109737(_0xa2b187,_0x34a967,_0x541ab4,_0x865ecd,_0x4b3814,_0x12b63c);},'pENPN':_0x40693a(0xf4),'diuBz':function(_0x5a0756,_0x4e1f95,_0x28f3a3,_0x7300f0,_0x2ac41e,_0x3b0672,_0x33222c){return _0x5a0756(_0x4e1f95,_0x28f3a3,_0x7300f0,_0x2ac41e,_0x3b0672,_0x33222c);},'bzXjQ':_0x40693a(0xd9),'dvrTX':_0x40693a(0xf0)};let _0xa9f411;try{!_0x4c6d95[_0x40693a(0xcc)]&&(logger['error'](_0x2382a4[_0x40693a(0xd1)]),process[_0x40693a(0x111)](0x1));!fs[_0x40693a(0xc8)](_0x2382a4[_0x40693a(0xca)](getCredentialsPath))&&(logger[_0x40693a(0x10b)](_0x2382a4[_0x40693a(0x11a)]),await _0x2382a4[_0x40693a(0x11b)](sendInstrumentationEvent,_0x4c6d95,_0x2382a4[_0x40693a(0xf5)],messageTypes[_0x40693a(0xc3)],_0x2382a4['xYJMw'],null,_0x4c6d95),process[_0x40693a(0x111)](0x1));logger[_0x40693a(0xe2)](_0x40693a(0xf6)+_0x4c6d95[_0x40693a(0xcc)]),await _0x2382a4[_0x40693a(0xe4)](sendInstrumentationEvent,_0x4c6d95,_0x2382a4[_0x40693a(0xf5)],messageTypes[_0x40693a(0xd2)],null,null,_0x4c6d95);const _0x19b9f2=JSON['parse'](fs[_0x40693a(0xfc)](_0x2382a4[_0x40693a(0xca)](getCredentialsPath)));global_registry[_0x40693a(0xee)]=_0x19b9f2[_0x40693a(0x10c)][_0x40693a(0xc2)],global_registry[_0x40693a(0xf3)]=_0x19b9f2[_0x40693a(0x10c)][_0x40693a(0xe1)];const _0x6d8010=WS_ENDPOINT[_0x40693a(0x11d)](_0x2382a4[_0x40693a(0x104)],_0x19b9f2[_0x40693a(0x10c)]['username'])[_0x40693a(0x11d)](_0x2382a4[_0x40693a(0x101)],_0x19b9f2[_0x40693a(0x10c)][_0x40693a(0xe1)]),_0x137f8a={};_0x137f8a[_0x40693a(0xcb)]=ws,_0x137f8a[_0x40693a(0xc7)]=0x36ee80,_0xa9f411=new ReconnectingWebSocket(_0x6d8010,[],_0x137f8a),logger['debug'](_0x2382a4[_0x40693a(0x115)]),webSocketUtils[_0x40693a(0x11c)](_0xa9f411,_0x4c6d95[_0x40693a(0x117)],_0x4c6d95[_0x40693a(0xe1)]);const [_0xe71c1,_0x13e1cc]=await _0x2382a4[_0x40693a(0xdc)](getGridDetails,_0x19b9f2[_0x40693a(0x10c)]['username'],_0x19b9f2['Browserstack']['password'],_0x4c6d95[_0x40693a(0xcc)]);if(_0x13e1cc){const _0x16e714=_0x13e1cc[_0x40693a(0xe2)];global_registry[_0x40693a(0xc4)]=_0x16e714[_0x40693a(0xc4)],global_registry[_0x40693a(0xf7)]=_0x16e714[_0x40693a(0x100)],global_registry[_0x40693a(0xf9)]=_0x16e714[_0x40693a(0xf9)];const _0x16640d=await _0x2382a4[_0x40693a(0x11b)](getCloudProviderObject,_0x16e714['cloudProvider'],_0x16e714['clusterName'],_0x16e714[_0x40693a(0xd6)],_0xa9f411,webSocketUtils,_0x4c6d95),[_0x24d084,_0x4c82b0,_0x4cf40b,_0x19a248,_0xf62237,_0xd6e8b7]=await _0x2382a4[_0x40693a(0xe3)](createK8sClient,_0x16640d,_0x4c6d95['skipTlsCertVerify']);await _0x2382a4[_0x40693a(0xc6)](scaleUpHubDeployment,_0x4c82b0,_0x16e714[_0x40693a(0xd6)]),logger[_0x40693a(0xe2)](_0x2382a4[_0x40693a(0xc1)]),process[_0x40693a(0x111)](0x0);}_0x2382a4[_0x40693a(0x102)](_0xe71c1[_0x40693a(0xe8)],0x191)&&(logger[_0x40693a(0x10b)](_0x2382a4[_0x40693a(0xda)]),await _0x2382a4[_0x40693a(0xd3)](sendInstrumentationEvent,_0x4c6d95,_0x2382a4[_0x40693a(0xf5)],messageTypes[_0x40693a(0xc3)],_0x2382a4[_0x40693a(0xe6)],null,_0x4c6d95),process['exit'](0x1)),_0x2382a4[_0x40693a(0x102)](_0xe71c1['statusCode'],0x190)&&(logger[_0x40693a(0x10b)](JSON[_0x40693a(0x10e)](_0xe71c1['body'])[_0x40693a(0xef)]),await _0x2382a4[_0x40693a(0x112)](sendInstrumentationEvent,_0x4c6d95,_0x2382a4['VESoj'],messageTypes[_0x40693a(0xc3)],_0x2382a4[_0x40693a(0x10f)],null,_0x4c6d95),process[_0x40693a(0x111)](0x1)),logger[_0x40693a(0x10b)](_0x40693a(0xd8)+JSON[_0x40693a(0xe0)](_0xe71c1)),await _0x2382a4[_0x40693a(0x11b)](sendInstrumentationEvent,_0x4c6d95,_0x2382a4['VESoj'],messageTypes[_0x40693a(0xc3)],_0x2382a4[_0x40693a(0x110)],_0xe71c1,_0x4c6d95),process['exit'](0x1);}catch(_0x2d11e4){const _0x35d781=_0x40693a(0xf8)+_0x2d11e4+'\x20\x0a'+JSON[_0x40693a(0xe0)](_0x2d11e4[_0x40693a(0xfb)])+'\x20';logger[_0x40693a(0x10b)](_0x35d781),process[_0x40693a(0x111)](0x1);}};