const a19_0x262804=a19_0x5a4f;function a19_0x5a4f(_0x5c20c0,_0x1651fe){const _0x36dec6=a19_0x36de();return a19_0x5a4f=function(_0x5a4f67,_0x3bc4ba){_0x5a4f67=_0x5a4f67-0x142;let _0x331706=_0x36dec6[_0x5a4f67];return _0x331706;},a19_0x5a4f(_0x5c20c0,_0x1651fe);}(function(_0x5af298,_0x3b402e){const _0x14e60a=a19_0x5a4f,_0x55ef5a=_0x5af298();while(!![]){try{const _0x422bda=-parseInt(_0x14e60a(0x176))/0x1+parseInt(_0x14e60a(0x190))/0x2+-parseInt(_0x14e60a(0x17b))/0x3*(-parseInt(_0x14e60a(0x19d))/0x4)+parseInt(_0x14e60a(0x148))/0x5*(-parseInt(_0x14e60a(0x19b))/0x6)+parseInt(_0x14e60a(0x18b))/0x7+-parseInt(_0x14e60a(0x16e))/0x8*(-parseInt(_0x14e60a(0x182))/0x9)+parseInt(_0x14e60a(0x146))/0xa*(-parseInt(_0x14e60a(0x195))/0xb);if(_0x422bda===_0x3b402e)break;else _0x55ef5a['push'](_0x55ef5a['shift']());}catch(_0x3079a8){_0x55ef5a['push'](_0x55ef5a['shift']());}}}(a19_0x36de,0x53a1b));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x262804(0x150)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require(a19_0x262804(0x17a)),{logger}=require(a19_0x262804(0x177)),{getCredentialsPath,getGridDetails}=require(a19_0x262804(0x174)),{scaleDownHubDeployment}=require(a19_0x262804(0x149)),{sendInstrumentationEvent}=require('../../utils/instrumentationUtils'),webSocketUtils=require(a19_0x262804(0x151)),{createK8sClient}=require(a19_0x262804(0x166)),{getCloudProviderObject}=require(a19_0x262804(0x198));exports[a19_0x262804(0x19a)]='grid',exports[a19_0x262804(0x186)]='Stop\x20a\x20running\x20Automation\x20grid.',exports['builder']=function(_0x138774){const _0x1f077b=a19_0x262804,_0x34d817={};_0x34d817[_0x1f077b(0x194)]=_0x1f077b(0x169),_0x34d817['oSxva']='string',_0x34d817[_0x1f077b(0x16d)]='Skip\x20insecure\x20cert\x20verification.',_0x34d817[_0x1f077b(0x193)]=_0x1f077b(0x167),_0x34d817[_0x1f077b(0x154)]=_0x1f077b(0x17c);const _0x1156f8=_0x34d817,_0x2f002a={};_0x2f002a['description']=_0x1156f8[_0x1f077b(0x194)],_0x2f002a['type']=_0x1156f8['oSxva'];const _0x2c9e92={};_0x2c9e92[_0x1f077b(0x15e)]=_0x1156f8[_0x1f077b(0x16d)],_0x2c9e92[_0x1f077b(0x168)]=_0x1156f8[_0x1f077b(0x193)],_0x2c9e92['default']=![];const _0x5e1f0e={};return _0x5e1f0e[_0x1f077b(0x14e)]=_0x2f002a,_0x5e1f0e[_0x1f077b(0x191)]=_0x2c9e92,_0x138774[_0x1f077b(0x152)](HELP_HEADER_MESSAGE[_0x1f077b(0x18d)])['epilogue'](HELP_FOOTER_MESSAGE)[_0x1f077b(0x14a)](_0x5e1f0e)['help'](_0x1156f8[_0x1f077b(0x154)])[_0x1f077b(0x189)];},exports[a19_0x262804(0x163)]=async function(_0xbecffc){const _0x15388d=a19_0x262804,_0x29e05f={'EpNUr':_0x15388d(0x157),'NMAfn':function(_0x43b150){return _0x43b150();},'EXCLm':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','yMAEa':function(_0x4de6e5,_0x3feee3,_0x562a75,_0x546856,_0x2fe3eb,_0x1e13e7,_0x2cc722){return _0x4de6e5(_0x3feee3,_0x562a75,_0x546856,_0x2fe3eb,_0x1e13e7,_0x2cc722);},'QCRzD':_0x15388d(0x197),'rTZWy':_0x15388d(0x159),'jvQKU':function(_0x535b76,_0x36e607,_0x4e160d,_0x68142d,_0xa088c9,_0x4b2cc2,_0x29aa12){return _0x535b76(_0x36e607,_0x4e160d,_0x68142d,_0xa088c9,_0x4b2cc2,_0x29aa12);},'Srucl':_0x15388d(0x18a),'ZIVJX':'<PasswordPlaceholder>','VZFRU':_0x15388d(0x158),'yscho':function(_0x2e4823,_0x30bd16,_0x3ca4cb,_0x448ad6){return _0x2e4823(_0x30bd16,_0x3ca4cb,_0x448ad6);},'YLTfk':function(_0x2ba0de,_0x599bc7,_0x2be72b){return _0x2ba0de(_0x599bc7,_0x2be72b);},'eppBU':function(_0x516903,_0x9b3c40,_0x3ee9bc){return _0x516903(_0x9b3c40,_0x3ee9bc);},'HUWoi':'Grid\x20stoppped.','NPrzw':function(_0x28e40a,_0x390477){return _0x28e40a===_0x390477;},'bPXyn':_0x15388d(0x17e),'DtAUW':function(_0x33ef3f,_0x4ac109,_0x3ba6a9,_0x575944,_0xdfd4c3,_0x37f8cc,_0x315d2e){return _0x33ef3f(_0x4ac109,_0x3ba6a9,_0x575944,_0xdfd4c3,_0x37f8cc,_0x315d2e);},'Iixhj':_0x15388d(0x175),'fUCZN':function(_0x721d3a,_0x5f3017){return _0x721d3a===_0x5f3017;},'HGHVe':_0x15388d(0x192),'XKkIm':function(_0x13c23b,_0x49aefb,_0x4006db,_0x6835d2,_0x38e23d,_0x344fac,_0x2e3d94){return _0x13c23b(_0x49aefb,_0x4006db,_0x6835d2,_0x38e23d,_0x344fac,_0x2e3d94);},'dNxft':_0x15388d(0x196)};let _0x348a32;try{!_0xbecffc[_0x15388d(0x16a)]&&(logger['error'](_0x29e05f[_0x15388d(0x142)]),process[_0x15388d(0x155)](0x1));!fs[_0x15388d(0x15d)](_0x29e05f[_0x15388d(0x14c)](getCredentialsPath))&&(logger[_0x15388d(0x172)](_0x29e05f[_0x15388d(0x180)]),await _0x29e05f[_0x15388d(0x185)](sendInstrumentationEvent,_0xbecffc,_0x29e05f[_0x15388d(0x170)],messageTypes[_0x15388d(0x145)],_0x29e05f[_0x15388d(0x161)],null,_0xbecffc),process[_0x15388d(0x155)](0x1));logger[_0x15388d(0x16c)](_0x15388d(0x18c)+_0xbecffc[_0x15388d(0x16a)]),await _0x29e05f['jvQKU'](sendInstrumentationEvent,_0xbecffc,_0x29e05f['QCRzD'],messageTypes[_0x15388d(0x184)],null,null,_0xbecffc);const _0x2e1950=JSON[_0x15388d(0x14f)](fs[_0x15388d(0x19e)](_0x29e05f[_0x15388d(0x14c)](getCredentialsPath)));global_registry['bstackUsername']=_0x2e1950['Browserstack']['username'],global_registry['bstackAccesskey']=_0x2e1950[_0x15388d(0x14d)][_0x15388d(0x153)];const _0x242e22=WS_ENDPOINT[_0x15388d(0x15a)](_0x29e05f['Srucl'],_0x2e1950[_0x15388d(0x14d)]['username'])[_0x15388d(0x15a)](_0x29e05f['ZIVJX'],_0x2e1950[_0x15388d(0x14d)][_0x15388d(0x153)]),_0x48aa5b={};_0x48aa5b['WebSocket']=ws,_0x48aa5b[_0x15388d(0x144)]=0x36ee80,_0x348a32=new ReconnectingWebSocket(_0x242e22,[],_0x48aa5b),logger[_0x15388d(0x162)](_0x29e05f[_0x15388d(0x147)]),webSocketUtils[_0x15388d(0x18f)](_0x348a32,_0xbecffc['user'],_0xbecffc[_0x15388d(0x153)]);const [_0x90c397,_0x1865ac]=await _0x29e05f['yscho'](getGridDetails,_0x2e1950['Browserstack'][_0x15388d(0x171)],_0x2e1950[_0x15388d(0x14d)]['password'],_0xbecffc[_0x15388d(0x16a)]);if(_0x1865ac){const _0x6d25d4=_0x1865ac[_0x15388d(0x16c)];global_registry['cloudProvider']=_0x6d25d4[_0x15388d(0x17d)],global_registry[_0x15388d(0x15b)]=_0x6d25d4[_0x15388d(0x16f)],global_registry[_0x15388d(0x16b)]=_0x6d25d4[_0x15388d(0x16b)];const _0x3d1f44=await _0x29e05f[_0x15388d(0x183)](getCloudProviderObject,_0x6d25d4[_0x15388d(0x17d)],_0x6d25d4['clusterName'],_0x6d25d4[_0x15388d(0x178)],_0x348a32,webSocketUtils,_0xbecffc),[_0x57e176,_0x150f7f,_0x41f6af,_0x5997c4,_0x6e9b8b,_0x4ad88c]=await _0x29e05f[_0x15388d(0x165)](createK8sClient,_0x3d1f44,_0xbecffc[_0x15388d(0x187)]);await _0x29e05f[_0x15388d(0x188)](scaleDownHubDeployment,_0x150f7f,_0x6d25d4[_0x15388d(0x178)]),logger[_0x15388d(0x16c)](_0x29e05f[_0x15388d(0x199)]),process[_0x15388d(0x155)](0x0);}_0x29e05f[_0x15388d(0x143)](_0x90c397[_0x15388d(0x18e)],0x191)&&(logger[_0x15388d(0x172)](_0x29e05f['bPXyn']),await _0x29e05f[_0x15388d(0x160)](sendInstrumentationEvent,_0xbecffc,_0x29e05f[_0x15388d(0x170)],messageTypes[_0x15388d(0x145)],_0x29e05f[_0x15388d(0x17f)],null,_0xbecffc),process[_0x15388d(0x155)](0x1)),_0x29e05f[_0x15388d(0x15f)](_0x90c397[_0x15388d(0x18e)],0x190)&&(logger[_0x15388d(0x172)](JSON[_0x15388d(0x14f)](_0x90c397[_0x15388d(0x179)])[_0x15388d(0x173)]),await _0x29e05f[_0x15388d(0x160)](sendInstrumentationEvent,_0xbecffc,_0x29e05f['QCRzD'],messageTypes[_0x15388d(0x145)],_0x29e05f[_0x15388d(0x19c)],null,_0xbecffc),process[_0x15388d(0x155)](0x1)),logger['error']('Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20'+JSON[_0x15388d(0x164)](_0x90c397)),await _0x29e05f[_0x15388d(0x181)](sendInstrumentationEvent,_0xbecffc,_0x29e05f[_0x15388d(0x170)],messageTypes[_0x15388d(0x145)],_0x29e05f[_0x15388d(0x156)],_0x90c397,_0xbecffc),process[_0x15388d(0x155)](0x1);}catch(_0x5ef366){const _0x53b285=_0x15388d(0x15c)+_0x5ef366+'\x20\x0a'+JSON[_0x15388d(0x164)](_0x5ef366[_0x15388d(0x14b)])+'\x20';logger[_0x15388d(0x172)](_0x53b285),process['exit'](0x1);}};function a19_0x36de(){const _0x19c703=['argv','<UsernamePlaceholder>','2532341RvAHpI','Stopping\x20grid\x20','stop','statusCode','addListeners','9160iXOfdA','skip-tls-cert-verify','invalid-grid-id','MVFlb','bhZxz','110cVpFiG','server-error','stop-grid-called','../../cloudproviders/utils','HUWoi','command','108nqIgwR','HGHVe','866972nTKiSn','readFileSync','EpNUr','NPrzw','connectionTimeout','ERROR','332740vajgXz','VZFRU','22600YVmElC','../../utils/gridComponents','options','stack','NMAfn','Browserstack','grid-id','parse','reconnecting-websocket','../../utils/webSocketUtils','usage','password','LJyhj','exit','dNxft','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','Adding\x20Websocket\x20listeners','init-not-called','replace','clusterRegion','Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20','existsSync','description','fUCZN','DtAUW','rTZWy','debug','handler','stringify','YLTfk','../../utils/createk8sClient','boolean','type','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','gridId','clusterName','info','ThZzb','1419152PWdkQG','region','QCRzD','username','error','message','../../utils/utilityMethods','unauthorised','575356RSpnHC','../../config/logger','name','body','../../config/constants','6nUsGLI','help','cloudProvider','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','Iixhj','EXCLm','XKkIm','27mrBquJ','jvQKU','INFO','yMAEa','desc','skipTlsCertVerify','eppBU'];a19_0x36de=function(){return _0x19c703;};return a19_0x36de();}